<!DOCTYPE html>
<html>
    <body>
        <table id="reversi"></table>
    </body>
</html>
<script src="reversi.js"></script>
<script>

let game = new Reversi();
show(game.board,game.getselectable());


function show(board,selectable=[],treverse=[]) {
    let table = document.createElement("table");
    table.className = "board";
    table.id = "reversi";
    let x = 8;
    let y = 8;
    for (let iy = 0; iy < y; iy++) {
        let tr = document.createElement("tr");
        tr.className = "board";
        for (let ix = 0; ix < x; ix++) {
            let td = document.createElement("td");
            td.className = "board";
            let div = document.createElement("div");
            div.className = "board s"+board[iy*x+ix];
            div.onclick = function() {
                game.choose(ix+1,iy+1);
                show(game.board,game.getselectable(),game.getsearch(ix,iy));
            }
            div.onmousemove = function() {
                show(game.board,game.getselectable(),game.getsearch(ix,iy));
            }
            let mark = document.createElement("div");
            mark.className = "board mark";
            if (selectable.indexOf(iy*x+ix)!=-1) {
                mark.className = "board mark selectable";
            }
            else if (treverse.indexOf(iy*x+ix)!=-1) {
                mark.className = "board mark treverse";
            }
            div.appendChild(mark);
            td.appendChild(div);
            tr.appendChild(td);
        }
        table.appendChild(tr);
    }
    document.getElementById("reversi").replaceWith(table);
}


</script>
<style>
    .board {
        margin: 0px;
        padding: 0px;
    }
    table.board {
        background-color: rgb(0, 0, 0);
        border: 5px solid rgb(83, 110, 138);
        border-radius: 5px;
    }
    td.board {
        background-color: rgb(84, 176, 41);
    }
    td.board:hover {
        background-color: rgb(89, 140, 65);
    }
    td.board:active {
        background-color: rgb(74, 113, 57);
    }
    td.board {
        padding: 3px;
    }
    div.board {
        color: rgba(0, 0, 0, 0);
        margin: 0px;
        height: 50px;
        width: 50px;
        border-radius: 25px;
    }
    div.board.s1 {
        background-color: rgb(255, 255, 255);
    }
    div.board.s2 {
        background-color: rgb(0, 0, 0);
    }
    div.board.mark {
        position: absolute;
        color: rgba(0, 0, 0, 0);
        margin: calc(25px - 5px);
        height: 10px;
        width: 10px;
        border-radius: 5px;
    }
    div.board.mark.selectable {
        background-color: rgb(182, 32, 32);
    }
    div.board.mark.treverse {
        background-color: rgb(103, 101, 233);
    }
</style>